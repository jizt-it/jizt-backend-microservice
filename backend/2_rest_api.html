

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>REST API &mdash; Jizt - AI Summarization 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  
  

  
    <link rel="canonical" href="docs.jizt.it/backend/2_rest_api.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cross-platform app" href="../frontend/1_cross-platform-app.html" />
    <link rel="prev" title="Architecture" href="1_architecture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Jizt - AI Summarization
          

          
            
            <img src="../_static/jizt-docs.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Summarization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../summarization/1_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summarization/2_preprocessing.html">Pre-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summarization/3_encoding.html">Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summarization/4_summarization.html">Summarization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summarization/5_postprocessing.html">Post-processing</a></li>
</ul>
<p class="caption"><span class="caption-text">Backend</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">REST API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#http-post-request">HTTP POST request</a></li>
<li class="toctree-l2"><a class="reference internal" href="#successive-http-get-requests">Successive HTTP GET requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-more-in-depth-explanation">A more in-depth explanation</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Frontend</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frontend/1_cross-platform-app.html">Cross-platform app</a></li>
</ul>
<p class="caption"><span class="caption-text">Help us</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/CONTRIBUTING.html">Contribute to Jizt</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Jizt - AI Summarization</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>REST API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/jizt-it/jizt-backend/blob/main/docs/source/backend/2_rest_api.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rest-api">
<span id="backend-rest-api"></span><h1>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h1>
<p>The generation of summaries is a process that can take several seconds, depending on
the length of the text to be summarized, the parameters with which the summary is
generated or the service load at the moment. Because of that, it would not be
appropriate that summaries were requested with a single HTTP request, since it would
be too long-lived.</p>
<p>We handle this with asynchronous request processing, with which requesting a summary
is a two-step process.</p>
<div class="section" id="http-post-request">
<h2>HTTP POST request<a class="headerlink" href="#http-post-request" title="Permalink to this headline">¶</a></h2>
<p>The client starts by making a POST request including the text to be summarized in the
body of the request. The API responds with a unique identifier of the summary, the
<code class="docutils literal notranslate"><span class="pre">summary_id</span></code>, as well as other information of interest.</p>
<div class="figure align-center" id="fig-api-request-1">
<a class="reference internal image-reference" href="../_images/api-request-1.png"><img alt="HTTP POST request." src="../_images/api-request-1.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">First, an HTTP POST request should be made. The API will then respond with the
<code class="docutils literal notranslate"><span class="pre">summary_id</span></code>.</span><a class="headerlink" href="#fig-api-request-1" title="Permalink to this image">¶</a></p>
</div>
<p>As can be seen in the previous figure, the status of the summary is <code class="docutils literal notranslate"><span class="pre">summarizing</span></code>,
and since the summary is not yet ready the <code class="docutils literal notranslate"><span class="pre">output</span></code> will be <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</div>
<div class="section" id="successive-http-get-requests">
<span id="sec-succesive-get-requests"></span><h2>Successive HTTP GET requests<a class="headerlink" href="#successive-http-get-requests" title="Permalink to this headline">¶</a></h2>
<p>After the POST request, the client can perform consecutive HTTP GET requests with the
summary id periodically in order to query the status of the summary. At some point,
the status of the summary will change to <code class="docutils literal notranslate"><span class="pre">completed</span></code>, and the response will
contain the generated summary, as illustrated in the following figure:</p>
<div class="figure align-center" id="fig-api-request-2">
<a class="reference internal image-reference" href="../_images/api-request-2.png"><img alt="HTTP GET request." src="../_images/api-request-2.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">The summary will be included in <code class="docutils literal notranslate"><span class="pre">output</span></code> as soon as it is ready.</span><a class="headerlink" href="#fig-api-request-2" title="Permalink to this image">¶</a></p>
</div>
<p>If a summary of the same text, with the same model and parameters had been previously
requested, the summary would already be stored in the database, so the response to the
first POST request would already contain the summary.</p>
<p>This is the main motivation behind implementing a database. Furthermore, apart from
working as a cache layer, the database is useful to keep some metrics, such as the
number of times a specific summary has been requested, or to evaluate the quality of
the generated summaries.</p>
</div>
<div class="section" id="a-more-in-depth-explanation">
<h2>A more in-depth explanation<a class="headerlink" href="#a-more-in-depth-explanation" title="Permalink to this headline">¶</a></h2>
<p>So what happens behind the scenes when a client requests a summary? The following
sequence diagram illustrates the process:</p>
<div class="figure align-center" id="fig-jizt-backend-seq-diagram">
<a class="reference internal image-reference" href="../_images/seq-diagram.png"><img alt="Jizt Backend sequence diagram." src="../_images/seq-diagram.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 10 </span><span class="caption-text">Summary request and processing.</span><a class="headerlink" href="#fig-jizt-backend-seq-diagram" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple">
<li><p>As we said, the client first makes an HTTP POST request, including in the body the
text to be summarized, as well as parameters of the summary to be generated.</p></li>
<li><p>Ingress checks that the request is being made to a valid endpoint, and if so,
redirects it to the Dispatcher.</p></li>
<li><p>The Dispatcher performs a series of checks:</p>
<ol class="arabic simple">
<li><p>Queries the database to check if there is already a summary generated for that
text with those parameters. If so, the client is answered with the summary data
(<code class="docutils literal notranslate"><span class="pre">output</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">started_at</span></code>, <code class="docutils literal notranslate"><span class="pre">ended_at</span></code>, etc.). The status of the
summary in this case will be <code class="docutils literal notranslate"><span class="pre">completed</span></code>.</p></li>
<li><p>Otherwise, the same data schema is used, only the output will be <code class="docutils literal notranslate"><span class="pre">null</span></code>, and
the status will be <code class="docutils literal notranslate"><span class="pre">summarizing</span></code>. At the same time, a message is sent to the
preprocessor topic, containing the text and the summary parameters, starting
thus the generation process.</p></li>
</ol>
</li>
<li><p>The pre-processor is constantly checking if there are new messages in its topic. If
there are, it consumes them, performs the pre-processing tasks, and produces the
result to the encoder topic.</p></li>
<li><p>This process continues in the same way until it reaches the post-processor, which
produces the final summary to the “ready” topic. The Dispatcher then consumes the
message and updates the database with the generated summary.</p></li>
<li><p>While the summary process completes, the client performs GET requests periodically,
until the REST API eventually responds with the generated summary.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../frontend/1_cross-platform-app.html" class="btn btn-neutral float-right" title="Cross-platform app" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="1_architecture.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>